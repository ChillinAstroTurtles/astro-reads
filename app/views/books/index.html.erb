<%= form_tag '', method: :get do %>
  <%= select_tag :category, options_from_collection_for_select(Category.all, "name", "name"), include_blank: true %>
  <%= submit_tag "Filter", data: { disable_with: "filtering..." } %>
<% end %>

<ul id="books">
  <% @books.each do |book| %>
    <li>
      <h2><%= book.name %></h2>
      <% if book.categories.any? %>
        <ul>
          <% book.categories.each do |category| %>
            <li><%= category.name %></li>
          <% end %>
        </ul>
      <% end %>
    </li>
  <% end %>
</ul>

<%= link_to_next_page @books, 'Load more' %>
